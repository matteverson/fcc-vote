<div ng-include="'components/navbar/navbar.html'"></div>
<div class="col-md-12">
  <h1>Your polls</h1>
  <ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="poll in polls">
  <li>{{poll.name}}</li>
  </ul>
  <br />
  <form class="form" name="form" ng-submit="addPoll(form)" novalidate>

    <div class="form-group" ng-class="{ 'has-success': form.name.$valid && submitted,
                                        'has-error': form.name.$invalid && submitted }">
      <label>Name</label>

      <input type="text" name="name" class="form-control" ng-model="poll.name"
             required/>
      <p class="help-block" ng-show="form.name.$error.required && submitted">
        A name is required
      </p>
    </div>

    <div class="form-group" ng-repeat="option in poll.options" ng-class="{ 'has-success': optionForm.option.$valid && submitted,
                                        'has-error': optionForm.option.$invalid && submitted }">
      <ng-form name="optionForm">
      <label>Option {{$index+1}}</label>

      <input type="text" name="option" class="form-control" ng-model="option.name"
             required
             mongoose-error/>
      <button class="btn btn-danger" ng-click="remove(option)">Delete</button>
      <p class="help-block" ng-show="optionForm.option.$invalid">
        The option cannot be empty
      </p>
      <p class="help-block" ng-show="optionForm.option.$error.mongoose">
        {{ errors.email }}
      </p>
    </ng-form>
    </div>

    <div>
      <button class="btn btn-primary" type="submit">Save</button>
      <button class="btn btn-inverse" ng-click="poll.options.push({name: '', votes: 0})">Add option</button>
    </div>

  </form>

</div
